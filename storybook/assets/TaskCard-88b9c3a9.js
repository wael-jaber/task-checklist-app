import{j as e}from"./jsx-runtime-6d9837fe.js";import{r as v}from"./index-93f6b7ae.js";import{g as ue,j as pe,s as I,_ as l,u as me,x as fe,a as he,c as xe,b as ge,i as ye}from"./DefaultPropsProvider-4fe26c0b.js";import{r as je}from"./createSvgIcon-97a11aa5.js";import{d as ve,C as Ce}from"./ChecklistItem-82138f56.js";import{d as Ee,a as Te,b as we}from"./Block-926010f8.js";import{d as ke}from"./Edit-5e653335.js";import{d as ze}from"./Delete-9dcaa643.js";import{d as G}from"./CheckCircle-31f857df.js";import{I as J}from"./IconButton-5241931a.js";import{M as be}from"./Menu-2edf3461.js";import{M as R}from"./MenuItem-431051d4.js";import{L as q}from"./ListItemIcon-64c3e971.js";import{L as B}from"./ListItemText-fdeedf6d.js";import{D as K}from"./Divider-7e260bb1.js";import{B as b}from"./Box-eaeca253.js";import{C as Ie,a as Se,b as _e}from"./CardHeader-f4eecaf3.js";import{T as L}from"./Typography-7ec13922.js";import{C as Me}from"./Chip-a53555c6.js";import{T as $e,u as De,a as V}from"./List-241a6e95.js";import{b as Re,u as qe}from"./ButtonBase-54c4ca59.js";function Be(t){return ue("MuiCollapse",t)}pe("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Le=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],We=t=>{const{orientation:i,classes:r}=t,d={root:["root",`${i}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${i}`],wrapperInner:["wrapperInner",`${i}`]};return ge(d,Be,r)},Ae=I("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,i)=>{const{ownerState:r}=t;return[i.root,i[r.orientation],r.state==="entered"&&i.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&i.hidden]}})(({theme:t,ownerState:i})=>l({height:0,overflow:"hidden",transition:t.transitions.create("height")},i.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},i.state==="entered"&&l({height:"auto",overflow:"visible"},i.orientation==="horizontal"&&{width:"auto"}),i.state==="exited"&&!i.in&&i.collapsedSize==="0px"&&{visibility:"hidden"})),Pe=I("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,i)=>i.wrapper})(({ownerState:t})=>l({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),Fe=I("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,i)=>i.wrapperInner})(({ownerState:t})=>l({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),Q=v.forwardRef(function(i,r){const d=me({props:i,name:"MuiCollapse"}),{addEndListener:m,children:C,className:g,collapsedSize:o="0px",component:E,easing:y,in:f,onEnter:c,onEntered:u,onEntering:s,onExit:S,onExited:Z,onExiting:N,orientation:H="vertical",style:W,timeout:h=fe.standard,TransitionComponent:ee=$e}=d,te=he(d,Le),_=l({},d,{orientation:H,collapsedSize:o}),T=We(_),O=De(),ne=Re(),x=v.useRef(null),A=v.useRef(),M=typeof o=="number"?`${o}px`:o,w=H==="horizontal",k=w?"width":"height",$=v.useRef(null),ie=qe(r,$),j=n=>a=>{if(n){const p=$.current;a===void 0?n(p):n(p,a)}},P=()=>x.current?x.current[w?"clientWidth":"clientHeight"]:0,re=j((n,a)=>{x.current&&w&&(x.current.style.position="absolute"),n.style[k]=M,c&&c(n,a)}),se=j((n,a)=>{const p=P();x.current&&w&&(x.current.style.position="");const{duration:z,easing:D}=V({style:W,timeout:h,easing:y},{mode:"enter"});if(h==="auto"){const U=O.transitions.getAutoHeightDuration(p);n.style.transitionDuration=`${U}ms`,A.current=U}else n.style.transitionDuration=typeof z=="string"?z:`${z}ms`;n.style[k]=`${p}px`,n.style.transitionTimingFunction=D,s&&s(n,a)}),oe=j((n,a)=>{n.style[k]="auto",u&&u(n,a)}),ae=j(n=>{n.style[k]=`${P()}px`,S&&S(n)}),le=j(Z),de=j(n=>{const a=P(),{duration:p,easing:z}=V({style:W,timeout:h,easing:y},{mode:"exit"});if(h==="auto"){const D=O.transitions.getAutoHeightDuration(a);n.style.transitionDuration=`${D}ms`,A.current=D}else n.style.transitionDuration=typeof p=="string"?p:`${p}ms`;n.style[k]=M,n.style.transitionTimingFunction=z,N&&N(n)}),ce=n=>{h==="auto"&&ne.start(A.current||0,n),m&&m($.current,n)};return e.jsx(ee,l({in:f,onEnter:re,onEntered:oe,onEntering:se,onExit:ae,onExited:le,onExiting:de,addEndListener:ce,nodeRef:$,timeout:h==="auto"?null:h},te,{children:(n,a)=>e.jsx(Ae,l({as:E,className:xe(T.root,g,{entered:T.entered,exited:!f&&M==="0px"&&T.hidden}[n]),style:l({[w?"minWidth":"minHeight"]:M},W),ref:ie},a,{ownerState:l({},_,{state:n}),children:e.jsx(Pe,{ownerState:l({},_,{state:n}),className:T.wrapper,ref:x,children:e.jsx(Fe,{ownerState:l({},_,{state:n}),className:T.wrapperInner,children:C})})}))}))});Q.muiSupportAuto=!0;const Ne=Q;var F={},He=ye;Object.defineProperty(F,"__esModule",{value:!0});var X=F.default=void 0,Oe=He(je()),Ue=e;X=F.default=(0,Oe.default)((0,Ue.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");const Y=({onEdit:t,onDelete:i,onDuplicate:r,onToggleBlocked:d,isBlocked:m=!1,disabled:C=!1})=>{const[g,o]=v.useState(null),E=!!g,y=u=>{o(u.currentTarget)},f=()=>{o(null)},c=u=>{u&&u(),f()};return e.jsxs(e.Fragment,{children:[e.jsx(J,{"aria-label":"task actions","aria-controls":"task-action-menu","aria-haspopup":"true",onClick:y,disabled:C,size:"small",children:e.jsx(Ee,{})}),e.jsxs(be,{id:"task-action-menu",anchorEl:g,open:E,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[t&&e.jsxs(R,{onClick:()=>c(t),children:[e.jsx(q,{children:e.jsx(ke,{fontSize:"small"})}),e.jsx(B,{children:"Edit Task"})]}),r&&e.jsxs(R,{onClick:()=>c(r),children:[e.jsx(q,{children:e.jsx(Te,{fontSize:"small"})}),e.jsx(B,{children:"Duplicate Task"})]}),d&&e.jsxs(R,{onClick:()=>c(()=>d(!m)),children:[e.jsx(q,{children:m?e.jsx(G,{fontSize:"small",color:"success"}):e.jsx(we,{fontSize:"small",color:"error"})}),e.jsx(B,{children:m?"Mark as Unblocked":"Mark as Blocked"})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx(K,{}),e.jsxs(R,{onClick:()=>c(i),children:[e.jsx(q,{children:e.jsx(ze,{fontSize:"small",color:"error"})}),e.jsx(B,{children:"Delete Task"})]})]})]})]})};Y.__docgenInfo={description:"",methods:[],displayName:"TaskActionMenu",props:{onEdit:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onDelete:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onDuplicate:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onToggleBlocked:{required:!1,tsType:{name:"signature",type:"function",raw:"(blocked: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"blocked"}],return:{name:"void"}}},description:""},isBlocked:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const Ve=I(J)(({theme:t,expanded:i})=>({transform:i?"rotate(180deg)":"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})})),Ge=I(b)(({theme:t})=>({display:"flex",alignItems:"center",color:t.palette.error.main,marginLeft:t.spacing(1)})),Je=({task:t,onChecklistItemStatusChange:i,onClick:r,onEdit:d,onDelete:m,onDuplicate:C,onToggleBlocked:g})=>{const[o,E]=v.useState(!1),y=s=>{s.stopPropagation(),E(!o)},f=s=>{s.stopPropagation()},c=(s,S)=>{i(t.id,s,S)},u=t.checklist.filter(s=>s.status==="done"||s.status==="final_installation_done").length;return e.jsxs(Ie,{sx:{mb:2,cursor:r?"pointer":"default","&:hover":{boxShadow:r?3:1}},onClick:r,children:[e.jsx(Se,{title:e.jsxs(b,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(L,{variant:"h6",component:"div",children:t.title}),t.isBlocked&&e.jsxs(Ge,{children:[e.jsx(ve,{fontSize:"small"}),e.jsx(L,{variant:"caption",ml:.5,children:"Blocked"})]}),!t.isBlocked&&t.isCompleted&&e.jsx(Me,{icon:e.jsx(G,{}),label:"Completed",color:"success",size:"small",sx:{ml:1}})]}),action:e.jsxs(b,{sx:{display:"flex",alignItems:"center"},onClick:f,children:[e.jsx(Y,{onEdit:d,onDelete:m,onDuplicate:C,onToggleBlocked:g,isBlocked:t.isBlocked}),e.jsx(Ve,{expanded:o,onClick:y,"aria-expanded":o,"aria-label":"show more",children:e.jsx(X,{})})]})}),e.jsx(K,{}),e.jsxs(_e,{children:[e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(L,{variant:"subtitle1",fontWeight:"medium",children:"Checklist"}),e.jsxs(L,{variant:"body2",color:"text.secondary",children:[u," / ",t.checklist.length," completed"]})]}),e.jsx(Ne,{in:o,timeout:"auto",unmountOnExit:!0,children:e.jsx(b,{sx:{mt:2},children:t.checklist.map(s=>e.jsx(Ce,{item:s,onStatusChange:c},s.id))})})]})]})};Je.__docgenInfo={description:"",methods:[],displayName:"TaskCard",props:{task:{required:!0,tsType:{name:"Task"},description:""},onChecklistItemStatusChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(taskId: string, itemId: string, status: string) => void",signature:{arguments:[{type:{name:"string"},name:"taskId"},{type:{name:"string"},name:"itemId"},{type:{name:"string"},name:"status"}],return:{name:"void"}}},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onEdit:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onDelete:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onDuplicate:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onToggleBlocked:{required:!1,tsType:{name:"signature",type:"function",raw:"(blocked: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"blocked"}],return:{name:"void"}}},description:""}}};export{Je as T};
