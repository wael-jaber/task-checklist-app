import{j as i}from"./jsx-runtime-6d9837fe.js";import{r as y}from"./index-93f6b7ae.js";import{g as re,j as oe,s as C,_ as a,u as se,v as ae,b as le,c as de,d as ce,i as pe}from"./DefaultPropsProvider-320a04f5.js";import{r as ue}from"./createSvgIcon-df99a646.js";import{d as me,C as he}from"./ChecklistItem-029cd1b5.js";import{I as fe}from"./IconButton-bd7d2e9a.js";import{B as R}from"./Box-1320c606.js";import{C as xe,a as ge,b as ye}from"./CardHeader-e4a5b74a.js";import{T as z}from"./Typography-ff3380f1.js";import{D as Ce}from"./Divider-1f441a49.js";import{T as Ee,u as ve,a as U}from"./dividerClasses-9531ba68.js";import{b as je,u as we}from"./ButtonBase-3dac11a5.js";function Te(t){return re("MuiCollapse",t)}oe("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Ie=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],ze=t=>{const{orientation:n,classes:r}=t,l={root:["root",`${n}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${n}`],wrapperInner:["wrapperInner",`${n}`]};return ce(l,Te,r)},Re=C("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:r}=t;return[n.root,n[r.orientation],r.state==="entered"&&n.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&n.hidden]}})(({theme:t,ownerState:n})=>a({height:0,overflow:"hidden",transition:t.transitions.create("height")},n.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},n.state==="entered"&&a({height:"auto",overflow:"visible"},n.orientation==="horizontal"&&{width:"auto"}),n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&{visibility:"hidden"})),Se=C("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,n)=>n.wrapper})(({ownerState:t})=>a({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),be=C("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,n)=>n.wrapperInner})(({ownerState:t})=>a({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),A=y.forwardRef(function(n,r){const l=se({props:n,name:"MuiCollapse"}),{addEndListener:E,children:S,className:b,collapsedSize:u="0px",component:s,easing:v,in:M,onEnter:W,onEntered:P,onEntering:q,onExit:H,onExited:G,onExiting:L,orientation:N="vertical",style:_,timeout:c=ae.standard,TransitionComponent:J=Ee}=l,K=le(l,Ie),j=a({},l,{orientation:N,collapsedSize:u}),h=ze(j),B=ve(),Q=je(),p=y.useRef(null),k=y.useRef(),w=typeof u=="number"?`${u}px`:u,f=N==="horizontal",x=f?"width":"height",T=y.useRef(null),V=we(r,T),m=e=>o=>{if(e){const d=T.current;o===void 0?e(d):e(d,o)}},D=()=>p.current?p.current[f?"clientWidth":"clientHeight"]:0,X=m((e,o)=>{p.current&&f&&(p.current.style.position="absolute"),e.style[x]=w,W&&W(e,o)}),Y=m((e,o)=>{const d=D();p.current&&f&&(p.current.style.position="");const{duration:g,easing:I}=U({style:_,timeout:c,easing:v},{mode:"enter"});if(c==="auto"){const F=B.transitions.getAutoHeightDuration(d);e.style.transitionDuration=`${F}ms`,k.current=F}else e.style.transitionDuration=typeof g=="string"?g:`${g}ms`;e.style[x]=`${d}px`,e.style.transitionTimingFunction=I,q&&q(e,o)}),Z=m((e,o)=>{e.style[x]="auto",P&&P(e,o)}),ee=m(e=>{e.style[x]=`${D()}px`,H&&H(e)}),te=m(G),ne=m(e=>{const o=D(),{duration:d,easing:g}=U({style:_,timeout:c,easing:v},{mode:"exit"});if(c==="auto"){const I=B.transitions.getAutoHeightDuration(o);e.style.transitionDuration=`${I}ms`,k.current=I}else e.style.transitionDuration=typeof d=="string"?d:`${d}ms`;e.style[x]=w,e.style.transitionTimingFunction=g,L&&L(e)}),ie=e=>{c==="auto"&&Q.start(k.current||0,e),E&&E(T.current,e)};return i.jsx(J,a({in:M,onEnter:X,onEntered:Z,onEntering:Y,onExit:ee,onExited:te,onExiting:ne,addEndListener:ie,nodeRef:T,timeout:c==="auto"?null:c},K,{children:(e,o)=>i.jsx(Re,a({as:s,className:de(h.root,b,{entered:h.entered,exited:!M&&w==="0px"&&h.hidden}[e]),style:a({[f?"minWidth":"minHeight"]:w},_),ref:V},o,{ownerState:a({},j,{state:e}),children:i.jsx(Se,{ownerState:a({},j,{state:e}),className:h.wrapper,ref:p,children:i.jsx(be,{ownerState:a({},j,{state:e}),className:h.wrapperInner,children:S})})}))}))});A.muiSupportAuto=!0;const _e=A;var $={},ke=pe;Object.defineProperty($,"__esModule",{value:!0});var O=$.default=void 0,De=ke(ue()),$e=i;O=$.default=(0,De.default)((0,$e.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");const Me=C(fe)(({theme:t,expanded:n})=>({transform:n?"rotate(180deg)":"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})})),We=C(R)(({theme:t})=>({display:"flex",alignItems:"center",color:t.palette.error.main,marginLeft:t.spacing(1)})),Pe=({task:t,onChecklistItemStatusChange:n,onClick:r})=>{const[l,E]=y.useState(!1),S=s=>{s.stopPropagation(),E(!l)},b=(s,v)=>{n(t.id,s,v)},u=t.checklist.filter(s=>s.status==="done"||s.status==="final_installation_done").length;return i.jsxs(xe,{sx:{mb:2,cursor:r?"pointer":"default","&:hover":{boxShadow:r?3:1}},onClick:r,children:[i.jsx(ge,{title:i.jsxs(R,{sx:{display:"flex",alignItems:"center"},children:[i.jsx(z,{variant:"h6",component:"div",children:t.title}),t.isBlocked&&i.jsxs(We,{children:[i.jsx(me,{fontSize:"small"}),i.jsx(z,{variant:"caption",ml:.5,children:"Ticket progress is blocked"})]})]}),action:i.jsx(Me,{expanded:l,onClick:S,"aria-expanded":l,"aria-label":"show more",children:i.jsx(O,{})})}),i.jsx(Ce,{}),i.jsxs(ye,{children:[i.jsxs(R,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[i.jsx(z,{variant:"subtitle1",fontWeight:"medium",children:"Checklist"}),i.jsxs(z,{variant:"body2",color:"text.secondary",children:[u," / ",t.checklist.length," completed"]})]}),i.jsx(_e,{in:l,timeout:"auto",unmountOnExit:!0,children:i.jsx(R,{sx:{mt:2},children:t.checklist.map(s=>i.jsx(he,{item:s,onStatusChange:b},s.id))})})]})]})};Pe.__docgenInfo={description:"",methods:[],displayName:"TaskCard",props:{task:{required:!0,tsType:{name:"Task"},description:""},onChecklistItemStatusChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(taskId: string, itemId: string, status: string) => void",signature:{arguments:[{type:{name:"string"},name:"taskId"},{type:{name:"string"},name:"itemId"},{type:{name:"string"},name:"status"}],return:{name:"void"}}},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{Pe as T};
